<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>All Inbox</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

    <style>
        body.light-mode {
            background-color: #ffffff;
            color: #000000;
        }
    
        body.dark-mode {
            background-color: #1a202c;
            color: #ffffff;
        }
    
        header.light-mode, header.dark-mode {
            background-color: inherit; 
        }
    </style>
    <script>
        function handlehome(event) {
            event.preventDefault(); 
            window.location.href = "home.html"; 
        }

        function loadContent(page) {
            document.getElementById('contentFrame').src = page;
        }

        document.addEventListener('DOMContentLoaded', function() {
            document.getElementById('mode-toggle').addEventListener('click', function() {
                document.body.classList.toggle('dark-mode');
                document.body.classList.toggle('light-mode');
            });
        });
    </script>

</head>
<body class="light-mode bg-gray-100">
    <!-- Main Container -->
    <div class="flex flex-col h-screen">
        <!-- Header -->
        <header class="bg-white shadow-md py-4 px-6 flex items-center">
            <div class="flex items-center justify-left flex-grow">
                <img src="images/LOGO.png" alt="Logo" class="w-8 h-8 object-cover mr-5">
                <h1 class="text-3xl font-bold text-gray-800">ONEBOX</h1>
            </div>

            <!-- Add a toggle button for light/dark mode -->
            <div class="flex items-center space-x-2 mr-2">
               <button id="mode-toggle" class="bg-gray-200 text-gray-700 px-4 py-2 rounded hover:bg-gray-300">
                Toggle Mode</button>
            </div>


        <!-- Compose Button -->
        <div class="flex items-center space-x-4">
            <button id="compose-btn" class="bg-blue-500 text-white px-4 py-2 rounded shadow-lg hover:bg-blue-600">Compose</button>
        </div>
    </header>

        <!-- Main Content Area -->
        <div class="flex flex-1 ">
            <!-- Original Sidebar -->
            <aside class="w-16 bg-white shadow-md flex flex-col">
                
                <nav class="flex-1 mt-1">
                    <a href="javascript:void(0);" onclick="handlehome(event)" class="flex items-center px-4 py-2 text-gray-600 hover:bg-gray-200">
                        <i class="fas fa-house-user mr-3"></i>
                    </a>
                    <a href="javascript:void(0);" onclick="loadContent('search.html')" class="flex items-center px-4 py-2 text-gray-600 hover:bg-gray-200">
                        <i class="fas fa-search mr-3"></i>
                    </a>
                    <a href="javascript:void(0);" onclick="loadContent('mail.html')" class="flex items-center px-4 py-2 text-gray-600 hover:bg-gray-200">
                        <i class="fas fa-envelope-open mr-3"></i>
                    </a>
                    <a href="javascript:void(0);" onclick="loadContent('tweets.html')" class="flex items-center px-4 py-2 text-gray-600 hover:bg-gray-200">
                        <i class="fas fa-paper-plane mr-3"></i>
                    </a>
                    <a href="javascript:void(0);" onclick="handleInbox(event)" class="flex items-center px-4 py-2 text-gray-600 hover:bg-gray-200">
                        <i class="fas fa-inbox mr-3"></i>
                    </a>
                    <a href="javascript:void(0);" onclick="loadContent('graph.html')" class="flex items-center px-4 py-2 text-gray-600 hover:bg-gray-200">
                        <i class="fas fa-chart-line mr-3"></i>
                    </a>
                </nav>

                <div class="p-4 border-t border-gray-200 flex justify-center items-center">
                    <i class="fas fa-user-circle text-gray-600 text-3xl"></i>
                </div>
            </aside>



            <main class="flex-1 flex flex-col ml-1 mt-1">
                <div class="flex flex-1">
                    <!-- Left Sidebar -->
                <aside class="w-80 bg-white shadow-lg p-6">

                       <!-- Received Mails Information -->
                       <div class="flex items-center justify-between mb-4">
                        <h3 class="text-lg font-semibold text-blue-600">All Inbox(s)
                        <i class="fa fa-angle-down" aria-hidden="true"></i> </h3>

                        <div class="flex items-center space-x-4">
                            <div class="relative">
                                <i class="fa fa-refresh" aria-hidden="true"></i>
                                       
                            </div>
                        </div>
                    </div>
                    <div class="mb-3">
                        <input type="text" placeholder="Search..." class="w-full px-4 py-2 border rounded-lg text-gray-700 focus:outline-none focus:ring-2 focus:ring-blue-500">
                    </div>
                    <div class="text-sm text-gray-600 mb-4">
                        26/26 Inbox Selected
                    </div>
                    <div class="flex items-center space-x-4 mb-4">
                        <li> 25 New replies </li> 
                        <h3 class="text-lg font-semibold ">Newest
                            <i class="fa fa-angle-down" aria-hidden="true"></i> </h3>
                        
                    </div>
                    <hr class="my-4">
                    <div class="flex flex-col space-y-6">
                        <div class="flex items-start space-x-4">
                            <i class="fas fa-envelope text-green-500 text-xl"></i>
                            <div>
                                <p class="font-semibold">Meeting Confirmation</p>
                                <p class="text-gray-600 text-sm">From: john.doe@example.com</p>
                                <p class="text-gray-600 text-sm">Date: August 28, 2024</p>
                            </div>
                        </div><hr>
                        <div class="flex items-start space-x-4">
                            <i class="fas fa-envelope text-green-500 text-xl"></i>
                            <div>
                                <p class="font-semibold">Project Update</p>
                                <p class="text-gray-600 text-sm">From: jane.smith@example.com</p>
                                <p class="text-gray-600 text-sm">Date: August 29, 2024</p>
                            </div>
                        </div><hr>
                        <div class="flex items-start space-x-4">
                            <i class="fas fa-envelope text-green-500 text-xl"></i>
                            <div>
                                <p class="font-semibold">william@gmail.com</p>
                                <p class="text-gray-600 text-sm">Payment not going through</p>
                                <p class="text-gray-600 text-sm">Date: August 29, 2024</p>
                            </div>
                        </div>
                        </div>
                </aside>

                    <!-- Content Area -->
                    <div class="flex-1 p-6 ml-1 mt-1">
                        <div class="mb-2 ml-1 mt-1">
                            <header class="flex  justify-between bg-white shadow-md p-2 mt-1 ml-1 mr-2">
                                <div class="flex items-right space-x-2">
                                    <!-- Dropdown for Meeting Completion -->
                                     <div>
                                        <h2> Jhon Deo</h2>
                                        <div class="text-sm text-gray-600 mb-4">
                                            john.doe@example.com
                                        </div>
                                        
                                     </div>
                                    <div class="relative">
                                        <button id="meeting-dropdown" class="flex items-center space-x-2 text-gray-700 hover:text-gray- 900">
                                            <span>Meeting Completed</span>
                                            <i class="fas fa-chevron-down"></i>
                                        </button><br>
                                        <div id="meeting-dropdown-menu" class="absolute right-0 mt-2 w-48 bg-white space-x-4 shadow-lg rounded-lg hidden">
                                            <ul class="list-none p-2 space-x-">
                                                <li><a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Pending</a></li>
                                                <li><a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Completed</a></li>
                                                
                                            </ul>
                                        </div>
                                    </div>
                        
                                    <!-- Dropdown for Move Options -->
                                    <div class="relative">
                                        <button id="other-dropdown" class="flex items-end space-x-2 text-gray-700 hover:text-gray-900">
                                            <span>Move</span>
                                            <i class="fas fa-chevron-down"></i>
                                        </button>
                                        <div id="other-dropdown-menu" class="absolute right-0 mt-2 w-48 bg-white shadow-lg rounded-lg hidden">
                                            <ul class="list-none p-2">
                                                <li><a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Mark as unread</a></li>
                                                <li><a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Edit lead</a></li>
                                                <li><a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Remove lead</a></li>
                                                <li><a href="#" class="block px-4 py-2 text-gray-700 hover:bg-gray-100">Delete</a></li>
                                               
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </header>
                        </div>
                        

                        <!-- Today Header -->
                        <div class="flex items-center mb-4">
                            <div class="border-t border-gray-300 flex-grow mr-3"></div>
                            <div class="text-gray-600 text-sm font-semibold bg-gray-100 px-3 py-1 rounded">
                                Today
                            </div>
                            <div class="border-t border-gray-300 flex-grow ml-3"></div>
                        </div>

                        <!-- Inbox Items -->
                        <div class="w-full max-w-3xl bg-white rounded-lg shadow-lg p-6">
                            <!-- Email Header -->
                            <div class="border-b pb-4 mb-4">
                                <div class="flex justify-between items-center">
                                    <div>
                                        <h2 class="text-2xl font-semibold text-gray-900">New Product Launch</h2>
                                        <p class="text-sm text-gray-600">From: john.doe@example.com</p>
                                        <p class="text-sm text-gray-600">to: lennon.j@mail.com</p>
                                    </div>
                                    <p class="text-sm text-gray-600">Date: August 27, 2024</p>
                                </div>
                            </div>
                            <!-- Email Body -->
                            <div class="text-gray-800 space-y-4">
                                <p>Hi Ichha,</p>
                                <p>
                                    I would like to introduce you to SaaSgrow, a productized design service specifically tailored for saas startups. Our aim is to help you enhance the user experience and boost the visual appeal of your software products.
                                </p>
                            </div>
                        </div>

                        <div class="email-item border-b p-4" data-thread-id="123">
                            <button onclick="openReplyBox(this)" class="bg-blue-500 text-white px-3 py-1 rounded mt-2 hover:bg-blue-600">
                                Reply
                            </button>

                            <div class="email-content hidden">
                                <p class="font-semibold">Meeting Confirmation</p>
                                <p class="text-gray-600 text-sm">From: john.doe@example.com</p>
                                <p class="text-gray-600 text-sm">Date: August 28, 2024</p>
                            </div>

                        </div>
                         
                        <!-- Reply Box -->
                        <div id="replyBox" class="hidden mt-4 p-4 border rounded-lg bg-gray-50">
                            <textarea id="replyTextArea" class="w-full h-24 p-2 border rounded focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Type your reply here..."></textarea>
                            <button onclick="sendReply()" class="mt-2 bg-green-500 text-white px-4 py-2 rounded hover:bg-green-600">
                                Send Reply
                            </button>

                            <button onclick="confirmDelete(this)" class="bg-red-500 text-white px-3 py-1 rounded mt-2 hover:bg-red-600">
                                Delete
                            </button>
                        </div>
                        
                        
                        
                    </div>         

         <!-- Right Sidebar -->
                    <aside class="w-60 bg-white shadow-lg p-6">
                        <h2 class="text-lg font-semibold mb-4 text-center">Leads Details</h2>
                        <div class="space-y-4">
                            <p><strong>Name:</strong> John Doe</p>
                            <p><strong>Email:</strong> john.doe@example.com</p>
                            <p><strong>Company:</strong> ABC Corp</p>
                            <p><strong>Contact:</strong> 91+ 888888888</p>
                        </div>
                        
                        <br>
                        <hr>
                        <br>

                        <h2 class="text-lg font-semibold mb-4 text-center">Activities</h2>
                        <h4 class="text-lg font-semibold mb-4">Campaign Name</h4>
                        <div class="space-y-6">
                            <div class="flex items-start space-x-4">
                                <i class="fas fa-envelope text-blue-500 text-xl"></i>
                                <div>
                                    <p class="font-semibold">Step 1: Sent Email</p>
                                    <p class="text-gray-600 text-sm">August 27, 2024</p>
                                </div>
                            </div>
                            <div class="flex items-start space-x-4 ml-6">
                                <i class="fas fa-envelope text-blue-500 text-xl"></i>
                                <div>
                                    <p class="font-semibold">Step 2: Opened</p>
                                    <p class="text-gray-600 text-sm">August 29, 2024</p>
                                </div>
                            </div>
                        </div>
                    </aside>
                </div>
            </main>
        </div>
    </div>


<!-- Delete Confirmation Modal -->
<div id="delete-confirmation-modal" class="fixed inset-0 bg-gray-900 bg-opacity-50 hidden flex items-center justify-center">
    <div class="bg-white p-6 rounded-lg shadow-lg w-80">
        <h2 class="text-xl font-semibold mb-4">Confirm Deletion</h2>
        <p class="mb-4">Are you sure you want to delete the text?</p>
        <div class="flex justify-end space-x-2">
            <button onclick="cancelDelete()" class="bg-gray-200 text-gray-700 px-4 py-2 rounded hover:bg-gray-300">
                Cancel
            </button>
            <button onclick="confirmDelete()" class="bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600">
                Delete
            </button>
        </div>
    </div>
</div>




    <!-- Compose Email Modal -->
    <div id="compose-modal" class="fixed inset-0 bg-gray-900 bg-opacity-50 hidden">
        <div class="relative w-full max-w-2xl p-4 mx-auto mt-24 bg-white rounded-lg shadow-lg">
            <div class="flex justify-between items-center border-b pb-2">
                <h2 class="text-xl font-semibold">New Message</h2>
                <button id="close-modal" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
            </div>
            <div class="mt-4">
                <form class="space-y-4">
                    <div>
                        <label for="to" class="block text-sm font-medium text-gray-700">To</label>
                        <input type="email" id="to" class="w-full border border-gray-300 p-2 rounded-md" placeholder="Recipient's email">
                    </div>
                    <div>
                        <label for="subject" class="block text-sm font-medium text-gray-700">Subject</label>
                        <input type="text" id="subject" class="w-full border border-gray-300 p-2 rounded-md" placeholder="Subject">
                    </div>
                    <div>
                        <label for="message" class="block text-sm font-medium text-gray-700">Message</label>
                        <textarea id="coMessage" class="w-full border border-gray-300 p-2 rounded-md" rows="6" placeholder="Write your message..."></textarea>
                    </div>
                    <div class="flex justify-end space-x-2">
                        <button onclick="confirmDelete(this)" type="button" class="bg-gray-200 text-gray-700 px-4 py-2 rounded hover:bg-gray-300">Delete</button>
                        <button onclick="sendReply()"  type="submit" class="bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600">Send</button>
                    </div>
                </form>
            </div>
        </div>
    </div>






    

<script>
 // Add an event listener to the toggle button

document.getElementById('mode-toggle').addEventListener('click', () => {
  document.body.classList.toggle('light-mode');
  document.body.classList.toggle('dark-mode');
});
 
// Compose mail/reply
const composeBtn = document.getElementById('compose-btn');
        const composeModal = document.getElementById('compose-modal');
        const closeModal = document.getElementById('close-modal');

        composeBtn.addEventListener('click', () => {
            composeModal.classList.remove('hidden');
        });

        closeModal.addEventListener('click', () => {
            composeModal.classList.add('hidden');
        });

        window.addEventListener('click', (e) => {
            if (e.target == composeModal) {
                composeModal.classList.add('hidden');
            }
        });


  // Keyboard shortcut for Reply (Ctrl + R) and Delete (Ctrl + D)
document.addEventListener('keydown', function(event) {
    if (event.ctrlKey && event.key === 'r') {
        event.preventDefault();  // Prevent browser's default Ctrl+R behavior (refresh)
        document.querySelector('.email-item button').click();  // Trigger click on the first Reply button
    }
    if ((event.ctrlKey || event.metaKey) && event.key === 'd') {
        event.preventDefault();
        confirmDelete(document.querySelector('#replyBox button:last-child'));  // Trigger click on the delete button in the reply box
    }
});

function openReplyBox(button) {
    const replyBox = document.getElementById('replyBox');
    replyBox.classList.remove('hidden');
}

function sendReply() {
    const replyTextArea = document.getElementById('replyTextArea');
    const replyText = replyTextArea.value;
    alert('Reply Sent: ' + replyText);
    replyTextArea.value = '';  // Clear the textarea after sending the reply
    document.getElementById('replyBox').classList.add('hidden');  // Hide the reply box after sending
}

function confirmDelete(button) {
    if (confirm('Are you sure you want to delete this?')) {
        document.getElementById('replyTextArea').value = '';  // Clear the textarea
        // Add any additional fields you want to clear, like the 'coMessage' field
        document.getElementById('coMessage').value = ''; 
    }
}


// 2nd header

    document.addEventListener('DOMContentLoaded', () => {
        const meetingDropdown = document.getElementById('meeting-dropdown');
        const meetingDropdownMenu = document.getElementById('meeting-dropdown-menu');
        const otherDropdown = document.getElementById('other-dropdown');
        const otherDropdownMenu = document.getElementById('other-dropdown-menu');

        meetingDropdown.addEventListener('click', () => {
            meetingDropdownMenu.classList.toggle('hidden');
            otherDropdownMenu.classList.add('hidden'); // Close other dropdown if open
        });

        otherDropdown.addEventListener('click', () => {
            otherDropdownMenu.classList.toggle('hidden');
            meetingDropdownMenu.classList.add('hidden'); // Close other dropdown if open
        });

        // Close dropdowns if click outside
        document.addEventListener('click', (e) => {
            if (!meetingDropdown.contains(e.target)) {
                meetingDropdownMenu.classList.add('hidden');
            }
            if (!otherDropdown.contains(e.target)) {
                otherDropdownMenu.classList.add('hidden');
            }
        });
    });


// reply  

function openReplyBox(button) {
    
    // Find the parent email item 
    const emailItem = button.closest('.email-item');
    const threadId = emailItem.dataset.threadId;

   
    const emailContent = emailItem.querySelector('.email-content');
    emailContent.classList.toggle('hidden');

    document.querySelector('#replyBox').dataset.threadId = threadId;

    // Display the reply box
    document.querySelector('#replyBox').classList.remove('hidden');
    document.querySelector('#replyBox textarea').focus(); 
}

  
  document.addEventListener('keydown', (e) => {
    // Check if the reply box is visible
    const replyBox = document.querySelector('#replyBox');
    if (replyBox.classList.contains('hidden')) return;

    
});

// send reply
function sendReply() {

  fetch('/api/reply', {
    method: 'POST',
    headers: {
      'Content-Type': 'application/json'
    },
    body: JSON.stringify({
      message: document.getElementById('replyTextArea').value
    })
  })
  .then(response => response.json())
  .then(data => console.log(data))
  .catch(error => console.error(error));

    // Assume the reply is sent successfully 
    const replyBox = document.querySelector('#replyBox');
    const threadId = replyBox.dataset.threadId;

    // Toggle the visibility of the email content
    const emailItem = document.querySelector(`.email-item[data-thread-id="${threadId}"]`);

    // Hide the email content and the reply box
    emailItem.querySelector('.email-content').classList.add('hidden');
    replyBox.classList.add('hidden');

    // Remove the textarea item
    const textarea = document.querySelector('#replyTextArea');
    textarea.value = '';
    textarea.focus();
}
  
  

// delete
 
  function deleteEmail(emailId) {
  // Remove the email item from the DOM
  document.getElementById(`email-item-${emailId}`).remove();
}


        // Toggle light/dark mode
        document.getElementById('mode-toggle').addEventListener('click', () => {
            document.body.classList.toggle('light-mode');
            document.body.classList.toggle('dark-mode');
        });

        // Show Delete Confirmation Modal
        function showDeleteConfirmation() {
            document.getElementById('delete-confirmation-modal').classList.remove('hidden');
        }

        // Confirm Deletion
        function confirmDelete() {
            
        }
        
  function confirmDelete(button) {
    document.getElementById('replyTextArea').value = ''; // Clear the textarea
            document.getElementById('delete-confirmation-modal').classList.add('hidden');
    
            const emailItem = button.closest('.email-item');
            const confirmed = confirm("Are you sure you want to delete this message?");
    
    if (confirmed) {
      // Remove the email item
      emailItem.remove();
      alert("Message deleted successfully.");

      
    }
  }
        // Cancel Deletion
        function cancelDelete() {
            document.getElementById('delete-confirmation-modal').classList.add('hidden');
        }

        
    </script>
</body>



